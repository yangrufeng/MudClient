<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" />
	</head>

	<body>
		<script src="js/mui.min.js"></script>
		<script type="text/javascript">
			mui.init();
			mui.plusReady(function() {
			});
			function isValidIP(ip) {
			    var reg = /^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/
			    return reg.test(ip);
			} 
			function goChat() {
				var ipBox = document.getElementById('hostip');
				var nickBox = document.getElementById('nickname');
				if((ipBox.value||'')=='') {
					mui.toast("请输入主机IP地址");
					return;
				}
				if(!isValidIP(ipBox.value)) {
					mui.toast("请输入有效的IP地址");
					return;
				}
				if((nickBox.value||'')=='') {
					mui.toast("请输入人物昵称");
					return;
				}
				if(nickBox.value.length > 5 || nickBox.value.length < 2) {
					mui.toast("玩家昵称必须满足2~5个字符长度");
					return;
				}
				var ip = ipBox.value;
				var nickname = nickBox.value;
				mui.openWindow({  
			        url: 'page/chatroom.html',  
			        id: 'chatroom',  
			        styles: {  
		//	            top: newpage - top - position, //新页面顶部位置  
		//	            bottom: newage - bottom - position, //新页面底部位置  
		//	            width: newpage - width, //新页面宽度，默认为100%  
		//	            height: newpage - height, //新页面高度，默认为100%  
		//	            ......  
			        },  
			        extras: {  
			        	ip:ip,
			        	nickname:nickname
		//	            ..... //自定义扩展参数，可以用来处理页面间传值  
			        }, 
			        show: {
			            autoShow: true, //页面loaded事件发生后自动显示，默认为true  
		//	            aniShow: animationType, //页面显示动画，默认为”slide-in-right“；  
		//	            duration: animationTime //页面动画持续时间，Android平台默认100毫秒，iOS平台默认200毫秒；  
			        },  
			        waiting: {  
			            autoShow: true, //自动显示等待框，默认为true  
			            title: '正在加载...', //等待对话框上显示的提示内容  
			            options: {  
		//	                width: waiting - dialog - widht, //等待框背景区域宽度，默认根据内容自动计算合适宽度  
		//	                height: waiting - dialog - height, //等待框背景区域高度，默认根据内容自动计算合适高度  
		//	                ......  
			            }  
			        }  
			    }); 
			}
		</script>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">加入游戏</h1>
		</header>
		<div id="dcontent" class="mui-content">
			<div class="mui-content-padded">
				<div class="mui-content-padded oauth-area">
					<div class="mui-input-row" style="margin: 10px 5px;">
						<label>主机IP</label>
						<input id="hostip" type="text" class="mui-input-clear" placeholder="请输入主机IP地址">
					</div>
					<div class="mui-input-row" style="margin: 10px 5px;">
						<label>昵称</label>
						<input id="nickname" type="text" class="mui-input-clear" placeholder="请输入人物昵称">
					</div>
					<div onclick="goChat()" class="mui-btn mui-btn-blue mui-btn-block host">加入</div>
				</div>
			</div>
		</div>
	</body>

</html>